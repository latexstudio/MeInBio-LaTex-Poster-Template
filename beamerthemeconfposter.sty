%==============================================================================
% Beamer style for the poster template posted at
% http://www.nathanieljohnston.com/2009/08/latex-poster-template/
%
% Created by the Computational Physics and Biophysics Group at Jacobs University
% https://teamwork.jacobs-university.de:8443/confluence/display/CoPandBiG/LaTeX+Poster
% Modified by Nathaniel Johnston (nathaniel@nathanieljohnston.com) in August 2009
% =============================================================================

\ProvidesPackage{beamerthemeconfposter}
\RequirePackage{tikz}		% for drawing the nice rounded boxes
\usetikzlibrary{arrows,backgrounds}
\RequirePackage[T1]{fontenc}
\RequirePackage{lmodern}
\usepackage{exscale}
\usepackage[listings,theorems]{tcolorbox}
\RequirePackage{textcomp}
\RequirePackage{amsmath,amssymb}
\usefonttheme{professionalfonts}
\newcommand{\makeruleinbox}{{\usebeamercolor[bg]{block alerted title}\centering\hspace*{-0.7cm}\rule{\inboxrule}{0.5cm}}}
\usepackage{ragged2e}

% MeInBio arial
\usepackage{helvet}
\renewcommand{\familydefault}{\sfdefault}

% Spacing before and inside list environments to add white space before lists and between items inside lists
\makeatletter
\def\@listi{\leftmargin\leftmarginii
\topsep 1ex % Spacing before lists
\parsep 0\p@ \@plus\p@
\itemsep 6pt} % Spacing between items
\makeatother

\usecaptiontemplate{\small\structure{\insertcaptionname~\insertcaptionnumber: }\insertcaption} % A fix for figure numbering

%-----------------------------------------------------------
% Define a whole bunch of custom colours and fonts
%-----------------------------------------------------------

\definecolor{lgreen} {RGB}{180,210,100}
\definecolor{dblue}  {RGB}{20,66,129}
\definecolor{ddblue} {RGB}{11,36,69}
\definecolor{lred}   {RGB}{220,0,0}
\definecolor{nred}   {RGB}{224,0,0}
\definecolor{norange}{RGB}{230,120,20}
\definecolor{nyellow}{RGB}{255,221,0}
\definecolor{ngreen} {RGB}{98,158,31}
\definecolor{dgreen} {RGB}{78,138,21}
\definecolor{nblue}  {RGB}{28,130,185}
\definecolor{jblue}  {RGB}{20,50,100}


% MeInBio
\definecolor{BGgray}		 {RGB}{225,225,225}
\definecolor{blockheader} {RGB}{253,203,2}  





% set the basic colors
\setbeamercolor{palette primary}   {fg=black,bg=white}
\setbeamercolor{palette secondary} {fg=black,bg=white}
\setbeamercolor{palette tertiary}  {bg=jblue,fg=white}
\setbeamercolor{palette quaternary}{fg=black,bg=white}
\setbeamercolor{structure}{fg=jblue}
\setbeamercolor{titlelike}{bg=jblue,fg=white}
\setbeamercolor{frametitle}{bg=jblue!10,fg=jblue}
\setbeamercolor{cboxb}{fg=black,bg=white}
\setbeamercolor{cboxr}{fg=black,bg=black}
\setbeamercolor{background canvas}{bg=BGgray}

% set colors for itemize/enumerate
\setbeamercolor{item}{fg=ngreen}
\setbeamercolor{item projected}{fg=white,bg=ngreen}

% set colors for blocks
\setbeamercolor{block title}{fg=black,bg=yellow}
\setbeamercolor{block body}{fg=black,bg=white}

% set colors for alerted blocks (blocks with frame)
\setbeamercolor{block alerted title}{fg=white,bg=jblue}
\setbeamercolor{block alerted body}{fg=black,bg=jblue!10}

% set the fonts
\setbeamerfont{section in head/foot}{series=\bfseries}
\setbeamerfont{block title}{series=\bfseries}
\setbeamerfont{block alerted title}{series=\bfseries}
\setbeamerfont{frametitle}{series=\bfseries}
\setbeamerfont{frametitle}{size=\Large}
\setbeamerfont{block body}{series=\rmfamily}

% set some beamer theme options
\setbeamertemplate{title page}[default][colsep=-4bp,rounded=true]
\setbeamertemplate{sections/subsections in toc}[square]
\setbeamertemplate{items}[circle]
\setbeamertemplate{blocks}[width=0.0]
\beamertemplatenavigationsymbolsempty

% set bibliography style
\setbeamertemplate{bibliography item}[text]
\setbeamercolor{bibliography item}{fg=black,bg=white}
\setbeamercolor{bibliography entry author}{fg=black,bg=white}
\setbeamercolor{bibliography item}{fg=black,bg=white}

% define some length variables that are used by the template
\newlength{\inboxwd}
\newlength{\iinboxwd}
\newlength{\inboxrule}
\makeatletter
\makeatother

%==============================================================================
% build the poster title
%==============================================================================

\newcommand{\titleoffset}{5ex}
\setbeamercolor{separation line}{use=structure,bg=black}


\setbeamertemplate{headline}{
	\vspace*{\titleoffset}
	\hfill
	\begin{beamercolorbox}[rounded=true, shadow = false, center,wd=\linewidth, colsep=0ex]{cboxr}
    \begin{beamercolorbox}[rounded=true, shadow = false, center,wd=0.997\linewidth, colsep=0ex]{cboxb}
    	\vspace{1ex}
%     \leavevmode
\begin{columns}
   \begin{column}{0.76\linewidth}
    \centering
    \usebeamercolor{title in headline}{\color{black}\huge{\textbf{\inserttitle}}\\[0.5ex]}
    \usebeamercolor{author in headline}{\color{fg}\large{\insertauthor}\\[1ex]}
    \usebeamercolor{institute in headline}{\color{fg}\small{\insertinstitute}\\[1ex]}
    	\vfill\vfill
   \end{column}
   \begin{column}{0.22\linewidth}
   \begin{figure}
   	\centering
   	\includegraphics[width=32ex]{imgs/meinbio_logo.pdf}
   	\hspace{3ex}\vspace{3ex}
   \end{figure}
   \end{column}   
  \end{columns}
  \end{beamercolorbox}
  \end{beamercolorbox}
    	\hfill\hfill
}

\newcommand{\boxmargin}{0.5ex}

\setbeamertemplate{block begin}{
	\begin{tcolorbox}[adjusted title=\insertblocktitle, halign title=flush center,
		colbacktitle=blockheader,
	 	toprule=\boxmargin ,bottomrule=\boxmargin, leftrule=\boxmargin, rightrule=\boxmargin,
	 	toptitle=1mm, bottomtitle=3mm,
%	 	valign=center, titlealign=center,
		coltitle=black]
}

\setbeamertemplate{block end}{\end{tcolorbox}}

%% Block definition
%\setbeamertemplate{block begin}
%{
%  \par\vskip\medskipamount
%  \begin{beamercolorbox}[colsep*=0ex,dp={2ex},center, wd=\linewidth]{cboxr}
%  
%  \begin{beamercolorbox}[colsep*=0ex,dp={2ex},center]{block title}
%    \vskip-0.25cm
%    \usebeamerfont{block title}\large\insertblocktitle
%    \vskip0.25cm
%
%  \end{beamercolorbox}
%  {\parskip0pt\par}
%  \ifbeamercolorempty[bg]{block title}
%  {}
%  {\ifbeamercolorempty[bg]{block body}{}{\nointerlineskip\vskip-0.5pt}}
%  \usebeamerfont{block body}
%  \vskip-0.5cm
%  \begin{beamercolorbox}[colsep*=0ex,vmode]{block body}
%  \justifying
%}
%
%\setbeamertemplate{block end}
%{
%  \end{beamercolorbox}
%  \end{beamercolorbox}
%
%}
